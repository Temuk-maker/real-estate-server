<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <title>Эхлэл — Зарын фийд</title>
  <style>
    body { font-family: system-ui, Arial; max-width: 1100px; margin: 24px auto; padding: 0 12px; }
    header { display:flex; justify-content:space-between; align-items:center; margin-bottom: 16px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap: 14px; }
    .card { border:1px solid #e5e7eb; border-radius: 12px; overflow: hidden; background:#fff; text-decoration: none; color: inherit; }
    .card img { width: 100%; height: 160px; object-fit: cover; display:block; }
    .meta { padding: 10px; }
    .title { font-weight: 600; font-size: 14px; line-height:1.3; margin-bottom: 6px; min-height: 36px; }
    .price { font-weight: 700; }
    .more { display:block; text-align:center; margin:16px 0; }
  </style>
</head>
<body>
  <header>
    <h1>Шинэ зарууд</h1>
    <a href="hadgalahsaw3.html">+ Зар оруулах</a>
  </header>

  <div id="grid" class="grid"></div>

  <script>
    const API = 'http://localhost:3000';

    async function loadFeed() {
      const res = await fetch(`${API}/api/feed?limit=24`);
      const data = await res.json();
      const grid = document.getElementById('grid');
      grid.innerHTML = '';

      for (const it of data.items) {
        const a = document.createElement('a');
        a.href = `./listing.html?id=${encodeURIComponent(it.id)}`;
        a.className = 'card';

        const img = document.createElement('img');
        img.alt = it.title;
        img.src = it.cover || 'https://via.placeholder.com/600x400?text=No+Image';

        const box = document.createElement('div');
        box.className = 'meta';

        const t = document.createElement('div');
        t.className = 'title';
        t.textContent = it.title;

        const p = document.createElement('div');
        p.className = 'price';
        p.textContent = new Intl.NumberFormat('mn-MN').format(it.price) + ' ₮';

        box.appendChild(t);
        box.appendChild(p);

        a.appendChild(img);
        a.appendChild(box);
        grid.appendChild(a);
      }
    }

    loadFeed();
  </script>
</body>
</html>
